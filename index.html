---
layout: default
title: Home
isHome: true

footer: >
  <link href="dist/query-builder.css" rel="stylesheet">
  <script src="dist/query-builder.js"></script>
  <script src="dist/index-demo.js"></script>
---

<!-- intro -->
<section class="bs-docs-section">
	<h1 id="overview" class="page-header">
		Overview
	</h1>
  <blockquote>
    QueryBuilder can be used on advanced search engine pages, administration backends, etc. to build complex queries or filters. It is highly customisable and can be used with many jQuery widgets like autocompleters and sliders.<br>
    It outputs a structured JSON of rules which can be easily parsed to create SQL/NoSQL/whatever queries.<br>
    <br>
    But let's look at an example !
  </blockquote>
  
  <div class="col-md-12 col-lg-10 col-lg-offset-1">
    <div id="demo-builder"></div>
    <p class="text-center">The full code of this example can be found <a href="demo/index.html">here</a>.</p>
  </div>
</section>


<section class="bs-docs-section">
  <h1 id="installation" class="page-header">
    Installation
  </h1>
  
  <h3 id="dependencies">Dependencies</h3>
  <ul>
      <li><a href="http://jquery.com">jQuery</a></li>
      <li><a href="http://getbootstrap.com">Bootstrap</a> (CSS Buttons and Utilities only)</li>
      <li><a href="http://momentjs.com">MomentJS</a> (optional, for Date/Time validation)</li>
  </ul>

  <h3 id="letsgo">Let's go!</h3>
  <p>Include <a href="https://raw.githubusercontent.com/mistic100/jQuery-QueryBuilder/master/query-builder.css" target="_blank">query-builder.css</a> in your page head and <a href="https://raw.githubusercontent.com/mistic100/jQuery-QueryBuilder/master/query-builder.js" target="_blank">query-builder.js</a> after <code>jquery.js</code>. Then add QueryBuilder to any <code>&lt;div></code> you want.</p>
  
{% highlight html %}
<div id="builder"></div>

<script>
  $('#builder').queryBuilder({
    filters: [ ... ]
  });
</script>
{% endhighlight %}
</section>


<section class="bs-docs-section">
  <h1 id="usage" class="page-header">
    Usage
  </h1>

  <h3 id="options">Options</h3>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th style="width: 150px;">default</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>filters</td>
          <td>array</td>
          <td><span class="label label-danger">required</span></td>
          <td>Array of available filters in the builder. <a href="#filters">See bellow</a>.</td>
        </tr>
        <tr>
          <td>operators</td>
          <td>array</td>
          <td></td>
          <td>Array of operators. <a href="#operators">See bellow</a>.</td>
        </tr>
        <tr>
          <td>lang</td>
          <td>array</td>
          <td></td>
          <td>Array of translatable strings. <a href="#lang">See bellow</a>.</td>
        </tr>
        <tr>
          <td>onValidationError</td>
          <td>function</td>
          <td>null</td>
          <td>Function called when a validation error occurs. It takes 5 parameters:
            <ul>
              <li><code>$rule</code> the jQuery <code>&lt;li></code> element of the rule throwing the error</li>
              <li><code>error</code> a String containing an error code</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>onAfterAddGroup</td>
          <td>function</td>
          <td>null</td>
          <td>Function called just after adding a group. It takes 1 parameter:
            <ul>
              <li><code>$group</code> is the jQuery <code>&lt;dl></code> element of the group</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>onAfterAddRule</td>
          <td>function</td>
          <td>null</td>
          <td>Function called just after adding a rule. It takes 1 parameter:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="bs-callout bs-callout-info">
    <h4>Callbacks context</h4>
    <p>In all callbacks, the <code>this</code> context is the QueryBuilder object currently used. Among other things it contains <code>this.settings</code> which holds the current configuration.</p>
  </div>
  
  <h3 id="filters">Filters</h3>
  <p>The <code>filters</code> option is an array of plain objects defining the rules possible contents. Here are the available attributes:</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th style="width: 150px;">default</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>id</td>
          <td>string</td>
          <td><span class="label label-danger">required</span></td>
          <td>Unique identifier of the filter</td>
        </tr>
        <tr>
          <td>field</td>
          <td>string</td>
          <td><code>id</code></td>
          <td>Field used by the filter, multiple filters can use the same field</td>
        </tr>
        <tr>
          <td>label</td>
          <td>string</td>
          <td><code>field</code></td>
          <td>Label used to display the filter</td>
        </tr>
        <tr>
          <td>type</td>
          <td>string</td>
          <td><span class="label label-danger">required</span></td>
          <td>Type of the field. Available types are <code>string</code>, <code>integer</code>, <code>double</code>, <code>date</code>, <code>time</code>, <code>datetime</code></td>
        </tr>
        <tr>
          <td>input</td>
          <td>string</td>
          <td>'text'</td>
          <td>Type of input used. Available types are <code>text</code>, <code>radio</code>, <code>checkbox</code>, <code>select</code></td>
        </tr>
        <tr>
          <td>multiple</td>
          <td>boolean</td>
          <td>false</td>
          <td><i>Only for <code>select</code> inputs:</i> accept multiple values</td>
        </tr>
        <tr>
          <td>placeholder</td>
          <td>string</td>
          <td>''</td>
          <td><i>Only for <code>text</code> inputs:</i> placeholder to display (uses HTML5 feature)</td>
        </tr>
        <tr>
          <td>vertical</td>
          <td>boolean</td>
          <td>false</td>
          <td><i>Only for <code>radio</code> and <code>checkbox</code> inputs:</i> display inputs vertically on not horizontally</td>
        </tr>
        <tr>
          <td>values</td>
          <td>array</td>
          <td><span class="label label-warning">required*</span></td>
          <td><i>Required for radios and checkboxes. Generally needed for selects.</i><br>
            Hashmap of options available. Keys are used as values and values are used as labels.</td>
        </tr>
        <tr>
          <td>validation</td>
          <td>object</td>
          <td>{}</td>
          <td>Object of options for rule validation. <a href="#validation">See bellow</a>.</td>
        </tr>
        <tr>
          <td>operators</td>
          <td>array</td>
          <td>[]</td>
          <td>Array of operators types to use for this filter. If empty the filter will use all applicable operators.</td>
        </tr>
        <tr>
          <td>plugin</td>
          <td>string</td>
          <td>null</td>
          <td>Name of a jquery plugin to apply on the input.</td>
        </tr>
        <tr>
          <td>plugin_config</td>
          <td>object</td>
          <td>{}</td>
          <td>Object of parameters to pass to the the plugin.</td>
        </tr>
        <tr>
          <td>onValidationError</td>
          <td>function</td>
          <td>null</td>
          <td>Called before the main <code>onValidationError</code>. Takes the same parameters.</td>
        </tr>
        <tr>
          <td>onAfterCreateRuleInput</td>
          <td>function</td>
          <td>null</td>
          <td>Function called after creating the input of a rule, typically at rule addition and filter change. It takes 2 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>filter</code></li>
            </ul>
            If a plugin is active on the filter, it is applied after this callback.
          </td>
        </tr>
        <tr>
          <td>onAfterChangeOperator</td>
          <td>function</td>
          <td>null</td>
          <td>Function called after changing the rule operator. It takes 3 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>onAfterSetValue</td>
          <td>function</td>
          <td>null</td>
          <td>Function called after setting the value of the rule in <code>setRules</code> function. It takes 4 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>valueParser</td>
          <td>function</td>
          <td>null</td>
          <td>Modifier applied to each value in <code>getRules</code> function. It takes 3 parameters:
            <ul>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <h3 id="methods">Methods</h3>
  <h4>getRules</h4>
  <p>Performs de validation and returns the rules as a plain object. See the <a href="basic-demo.html">basic demo</a> for output example.</p>
{% highlight javascript %}
$('#builder').queryBuilder('getRules')
{% endhighlight %}
  
  <h4>setRules</h4>
  <p>Clears the builder and set new rules. The parameters must have the same structure has the output of <code>getRules</code>.</p>
{% highlight javascript %}
$('#builder').queryBuilder('setRules', { ... })
{% endhighlight %}
  
  <h4>reset</h4>
  <p>Removes all rules.</p>
{% highlight javascript %}
$('#builder').queryBuilder('reset')
{% endhighlight %}
  
  <h4>destroy</h4>
  <p>Completely destroy the builder and it's data.</p>
{% highlight javascript %}
$('#builder').queryBuilder('destroy')
{% endhighlight %}
</section>


<section class="bs-docs-section">
  <h1 id="advanced" class="page-header">
    Advanced
  </h1>
  
  <h3 id="operators">Operators</h3>
  <p>You can define the list of operators available in the query builder. It's an array of plain objects.</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>type</td>
          <td>string</td>
          <td>Identifier of the operator</td>
        </tr>
        <tr>
          <td>accept_values</td>
          <td>boolean</td>
          <td><code>true</code> if the user can enter a value when this operator is selected</td>
        </tr>
        <tr>
          <td>apply_to</td>
          <td>array</td>
          <td>An array containing <code>string</code>, <code>number</code>, <code>datetime</code></td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <p>The default operators are:</p>
{% highlight javascript %}
{type: 'equal',            accept_values: true,  apply_to: ['string', 'number', 'datetime']},
{type: 'not_equal',        accept_values: true,  apply_to: ['string', 'number', 'datetime']},
{type: 'in',               accept_values: true,  apply_to: ['string', 'number', 'datetime']},
{type: 'not_in',           accept_values: true,  apply_to: ['string', 'number', 'datetime']},
{type: 'less',             accept_values: true,  apply_to: ['number', 'datetime']},
{type: 'less_or_equal',    accept_values: true,  apply_to: ['number', 'datetime']},
{type: 'greater',          accept_values: true,  apply_to: ['number', 'datetime']},
{type: 'greater_or_equal', accept_values: true,  apply_to: ['number', 'datetime']},
{type: 'begins_with',      accept_values: true,  apply_to: ['string']},
{type: 'not_begins_with',  accept_values: true,  apply_to: ['string']},
{type: 'contains',         accept_values: true,  apply_to: ['string']},
{type: 'not_contains',     accept_values: true,  apply_to: ['string']},
{type: 'ends_with',        accept_values: true,  apply_to: ['string']},
{type: 'not_ends_with',    accept_values: true,  apply_to: ['string']},
{type: 'is_empty',         accept_values: false, apply_to: ['string']},
{type: 'is_not_empty',     accept_values: false, apply_to: ['string']},
{type: 'is_null',          accept_values: false, apply_to: ['string', 'number', 'datetime']},
{type: 'is_not_null',      accept_values: false, apply_to: ['string', 'number', 'datetime']}
{% endhighlight %}
  
  <h3 id="validation">Validation</h3>
  <p>QueryBuilder integrates a configurable validation system triggered when <code>getRules</code> method is called. The default validator checks for emptyness and can be extended with format check an bounds.<br>
  Optionally you can define a custom validation callback.<br>
  Here are the available attributes of the <code>validation</code> field of each filter:</p>
  
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>format</td>
          <td>string|object</td>
          <td>
            <ul>
              <li>For <code>date</code>, <code>time</code>, <code>datetime</code>: a valid <a href="http://momentjs.com/docs/#/parsing/string-format/">MomentJS string format</a></li>
              <li>For <code>string</code>: a regular expression (plain or RegExp object)</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>min</td>
          <td>integer|double|string</td>
          <td>
            <ul>
              <li>For <code>integer</code>, <code>double</code>: minimum value</li>
              <li>For <code>date</code>, <code>time</code>, <code>datetime</code>: minimum value, respecting <code>format</code></li>
              <li>For <code>string</code>: minimum length</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>max</td>
          <td>integer|double|string</td>
          <td>
            <ul>
              <li>For <code>integer</code>, <code>double</code>: maximum value</li>
              <li>For <code>date</code>, <code>time</code>, <code>datetime</code>: maximum value, respecting <code>format</code></li>
              <li>For <code>string</code>: maximum length</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>step</td>
          <td>integer|double</td>
          <td>
            <ul>
              <li>For <code>integer</code>, <code>double</code>: step value (for <code>double</code> you should always provide this value in order to pass the browser validation on <code>number</code> inputs)</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>callback</td>
          <td>function</td>
          <td>A function used to perform the validation. If provided, the default validation will not be performed. It must returns <code>true</code> if the value is valid or a string otherwise. It takes 2 parameters:
            <ul>
              <li><code>value</code></li>
              <li><code>filter</code></li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <h3 id="events">Events</h3>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
       <tr>
         <th style="width: 150px;">Event Type</th>
         <th>Description</th>
       </tr>
      </thead>
      <tbody>
       <tr>
         <td>validationError.queryBuilder</td>
         <td>Fired when a validation error occured. The Event object contains the following attributes:
            <ul>
              <li><code>targetRule</code> DOM <code>&lt;li></code> element of the rule throwing the error</li>
              <li><code>error</code> a String containing an error code</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
              <li><code>builder</code> instance of QueryBuilder</li>
            </ul>
            The event is fired after the <code>onValidationError</code> callbacks.
         </td>
       </tr>
      </tbody>
    </table>
  </div>
  
  <h3 id="lang">Translation</h3>
  <p>Some default translation files are available in the <a href="https://github.com/mistic100/jQuery-QueryBuilder/tree/master/i18n" target="_blank">i18n</a> folder. Just include one of the files after the main JavaScript to use it.<br>
  Alternatively you can overwrite some translations with the <code>lang</code> option. It is very useful for custom operators.<br>
  Default strings are:</p>
  
{% highlight javascript %}
add_rule: 'Add rule',
add_group: 'Add group',
delete_rule: 'Delete',
delete_group: 'Delete',

and_condition: 'AND',
or_condition: 'OR',

filter_select_placeholder: '------',

operator_equal: 'equal',
operator_not_equal: 'not equal',
operator_in: 'in',
operator_not_in: 'not in',
operator_less: 'less',
operator_less_or_equal: 'less or equal',
operator_greater: 'greater',
operator_greater_or_equal: 'greater or equal',
operator_begins_with: 'begins with',
operator_not_begins_with: 'doesn\'t begin with',
operator_contains: 'contains',
operator_not_contains: 'doesn\'t contain',
operator_ends_with: 'ends with',
operator_not_ends_with: 'doesn\'t end with',
operator_is_empty: 'is empty',
operator_is_not_empty: 'is not empty',
operator_is_null: 'is null',
operator_is_not_null: 'is not null'
{% endhighlight %}
</section>