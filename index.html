---
layout: default
title: Home
description: jQuery plugin for user friendly query/filter creator
isHome: true
---

<section class="bs-docs-section">
	<h1 id="overview" class="page-header">
		Overview
	</h1>
  <blockquote>
    QueryBuilder can be used on advanced search engine pages, administration backends, etc. to build complex queries or filters. It is highly customisable and can be used with many jQuery widgets like autocompleters and sliders.<br>
    It outputs a structured JSON of rules which can be easily parsed to create SQL/NoSQL/whatever queries.<br>
    It can also directly create a SQL WHERE statement.<br>
    <br>
    But let's look at an example !
  </blockquote>
  
  <div class="col-md-12 col-lg-10 col-lg-offset-1">
    <div id="demo-builder"></div>
    <p class="text-center">The full code of this example can be found <a href="{{site.github.url}}/demo-basic.html">here</a>.</p>
  </div>
</section>


<section class="bs-docs-section">
  <h1 id="installation" class="page-header">
    Installation
  </h1>
  
  <h3 id="dependencies">Dependencies</h3>
  <ul>
      <li><a href="http://jquery.com">jQuery</a></li>
      <li><a href="http://getbootstrap.com">Bootstrap</a> (CSS Buttons and Utilities only)</li>
      <li><a href="http://momentjs.com">MomentJS</a> (optional, for Date/Time validation)</li>
  </ul>

  <h3 id="letsgo">Let's go!</h3>
  <p>Include <a href="https://raw.githubusercontent.com/mistic100/jQuery-QueryBuilder/master/dist/query-builder.min.css" target="_blank">query-builder.css</a> in your page head and <a href="https://raw.githubusercontent.com/mistic100/jQuery-QueryBuilder/master/dist/query-builder.min.js" target="_blank">query-builder.js</a> after <code>jquery.js</code>. Then add QueryBuilder to any <code>&lt;div></code> you want.</p>
  
{% highlight html %}
<div id="builder"></div>

<script>
  $('#builder').queryBuilder({
    filters: [ ... ]
  });
</script>
{% endhighlight %}
</section>


<section class="bs-docs-section">
  <h1 id="usage" class="page-header">
    Usage
  </h1>

  <h3 id="options">Options</h3>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th style="width: 150px;">default</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>filters</td>
          <td>object[]</td>
          <td><span class="label label-danger">required</span></td>
          <td>Array of available filters in the builder. <a href="#filters">See bellow</a>.</td>
        </tr>
        <tr>
          <td>allow_groups</td>
          <td>boolean</td>
          <td>true</td>
          <td>Allow creation of rules groups.</td>
        </tr>
        <tr>
          <td>sortable</td>
          <td>boolean</td>
          <td>false</td>
          <td>Enable sortable rules and groups. Might not work on old browsers not supporting HTML5 Drag &amp; Drop.</td>
        </tr>
        <tr>
          <td>operators</td>
          <td>object[]</td>
          <td></td>
          <td>Array of operators. <a href="#operators">See bellow</a>.</td>
        </tr>
        <tr>
          <td>conditions</td>
          <td>string[]</td>
          <td>['AND', 'OR']</td>
          <td>Array of available group conditions. Use the <a href="#lang">lang</a> option to change the label
            (the keyword is always lower-cased before lookup in <code>lang</code> array).</td>
        </tr>
        <tr>
          <td>default_condition</td>
          <td>string</td>
          <td>'AND'</td>
          <td>Default active condition.</td>
        </tr>
        <tr>
          <td>readonly_behavior.delete_group</td>
          <td>boolean</td>
          <td>false</td>
          <td>Allow to delete a group containing a readonly rule.</td>
        </tr>
        <tr>
          <td>readonly_behavior.sortable</td>
          <td>boolean</td>
          <td>true</td>
          <td>Allow to move a readonly rule when <code>sortable</code> is true.</td>
        </tr>
        <tr>
          <td>lang</td>
          <td>object</td>
          <td></td>
          <td>Array of translatable strings. <a href="#lang">See bellow</a>.</td>
        </tr>
        <tr>
          <td>onValidationError</td>
          <td>function</td>
          <td>null</td>
          <td>Function called when a validation error occurs. It takes 5 parameters:
            <ul>
              <li><code>$rule</code> the jQuery <code>&lt;li></code> element of the rule throwing the error</li>
              <li><code>error</code> a String containing an error code</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>onAfterAddGroup</td>
          <td>function</td>
          <td>null</td>
          <td>Function called just after adding a group. It takes 1 parameter:
            <ul>
              <li><code>$group</code> is the jQuery <code>&lt;dl></code> element of the group</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>onAfterAddRule</td>
          <td>function</td>
          <td>null</td>
          <td>Function called just after adding a rule. It takes 1 parameter:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>icons</td>
          <td>object[]</td>
          <td>glyphicons</td>
          <td>Array of icon mappings. Defaults to using Glyphicons. <a href="#icons">See bellow</a>.</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="bs-callout bs-callout-info">
    <h4>Callbacks context</h4>
    <p>In all callbacks, the <code>this</code> context is the QueryBuilder object currently used. Among other things it contains <code>this.settings</code> which holds the current configuration.</p>
  </div>
  
  <h3 id="filters">Filters</h3>
  <p>The <code>filters</code> option is an array of plain objects defining the rules possible contents. Here are the available attributes:</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th style="width: 150px;">default</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>id</td>
          <td>string</td>
          <td><span class="label label-danger">required</span></td>
          <td>Unique identifier of the filter.</td>
        </tr>
        <tr>
          <td>field</td>
          <td>string</td>
          <td><code>id</code></td>
          <td>Field used by the filter, multiple filters can use the same field.</td>
        </tr>
        <tr>
          <td>label</td>
          <td>string</td>
          <td><code>field</code></td>
          <td>Label used to display the filter.</td>
        </tr>
        <tr>
          <td>type</td>
          <td>string</td>
          <td><span class="label label-danger">required</span></td>
          <td>Type of the field. Available types are <code>string</code>, <code>integer</code>, <code>double</code>, <code>date</code>, <code>time</code> and <code>datetime</code>.</td>
        </tr>
        <tr>
          <td>input</td>
          <td>string|function</td>
          <td>'text'</td>
          <td>Type of input used. Available types are <code>text</code>, <code>radio</code>, <code>checkbox</code> and <code>select</code>.
            It can also be a function which returns the HTML of the said input, this function takes 2 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>filter</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>multiple</td>
          <td>boolean</td>
          <td>false</td>
          <td><i>Only for <code>select</code> inputs:</i> accept multiple values.</td>
        </tr>
        <tr>
          <td>placeholder</td>
          <td>string</td>
          <td>''</td>
          <td><i>Only for <code>text</code> inputs:</i> placeholder to display (uses HTML5 feature).</td>
        </tr>
        <tr>
          <td>vertical</td>
          <td>boolean</td>
          <td>false</td>
          <td><i>Only for <code>radio</code> and <code>checkbox</code> inputs:</i> display inputs vertically on not horizontally.</td>
        </tr>
        <tr>
          <td>values</td>
          <td>array</td>
          <td><span class="label label-warning">required*</span></td>
          <td><i>Required for <code>radio</code> and <code>checkboxe</code> inputs. Generally needed for <code>select</code> inputs.</i><br>
            Hashmap of options available. Keys are used as values and values are used as labels.</td>
        </tr>
        <tr>
          <td>validation</td>
          <td>object</td>
          <td>{}</td>
          <td>Object of options for rule validation. <a href="#validation">See bellow</a>.</td>
        </tr>
        <tr>
          <td>operators</td>
          <td>array</td>
          <td>[]</td>
          <td>Array of operators types to use for this filter. If empty the filter will use all applicable operators.</td>
        </tr>
        <tr>
          <td>plugin</td>
          <td>string</td>
          <td>null</td>
          <td>Name of a jQuery plugin to apply on the input.</td>
        </tr>
        <tr>
          <td>plugin_config</td>
          <td>object</td>
          <td>{}</td>
          <td>Object of parameters to pass to the plugin.</td>
        </tr>
        <tr>
          <td>onValidationError</td>
          <td>function</td>
          <td>null</td>
          <td>Called before the main <code>onValidationError</code>. Takes the same parameters.</td>
        </tr>
        <tr>
          <td>onAfterCreateRuleInput</td>
          <td>function</td>
          <td>null</td>
          <td>Function called after creating the input of a rule, typically at rule addition and filter change. It takes 2 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>filter</code></li>
            </ul>
            If a plugin is active on the filter, it is applied after this callback.
          </td>
        </tr>
        <tr>
          <td>onAfterChangeOperator</td>
          <td>function</td>
          <td>null</td>
          <td>Function called after changing the rule operator. It takes 3 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>onAfterSetValue</td>
          <td>function</td>
          <td>null</td>
          <td>Function called after setting the value of the rule in <code>setRules</code> function. It takes 4 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>valueParser</td>
          <td>function</td>
          <td>null</td>
          <td>Modifier applied to each value in <code>getRules</code> function. It takes 4 parameters:
            <ul>
              <li><code>$rule</code> is the jQuery <code>&lt;li></code> element of the rule</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <h3 id="methods">Methods</h3>
  <h4>getRules</h4>
  <p>Performs validation and returns the rules as a plain object. See the <a href="basic-demo.html">basic demo</a> for output example.</p>
{% highlight javascript %}
$('#builder').queryBuilder('getRules')
{% endhighlight %}
  
  <h4>setRules</h4>
  <p>Clears the builder and set new rules. The parameters must have the same structure has the output of <code>getRules</code>.</p>
{% highlight javascript %}
$('#builder').queryBuilder('setRules', { ... })
{% endhighlight %}

  <p>Each rule can have an additional <code>readonly</code> parameter which will prevent rule edition/deletion if <code>true</code>.</p>
  
  <h4>reset</h4>
  <p>Removes all rules.</p>
{% highlight javascript %}
$('#builder').queryBuilder('reset')
{% endhighlight %}
  
  <h4>destroy</h4>
  <p>Completely destroy the builder and it's data.</p>
{% highlight javascript %}
$('#builder').queryBuilder('destroy')
{% endhighlight %}
</section>


<section class="bs-docs-section">
  <h1 id="advanced" class="page-header">
    Advanced
  </h1>
  
  <h3 id="operators">Operators</h3>
  <p>You can define the list of operators available in the query builder. It's an array of plain objects.</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>type</td>
          <td>string</td>
          <td>Identifier of the operator.</td>
        </tr>
        <tr>
          <td>accept_values</td>
          <td>int</td>
          <td>The number of inputs displayed. Typical values are <code>0</code> (<code>is_null</code> &amp; similar operators),
            <code>1</code> (most operators) and <code>2</code> (<code>between</code> operator).
          </td>
        </tr>
        <tr>
          <td>apply_to</td>
          <td>array</td>
          <td>An array containing <code>string</code>, <code>number</code>, <code>datetime</code>.</td>
        </tr>
        <tr>
          <td>sql</td>
          <td>string | object</td>
          <td>Configuration object for SQL output, can be a simple operator string or an object with:
            <ul>
              <li><code>op</code> operator string</li>
              <li><code>fn</code> callback to apply to the value</li>
              <li><code>list</code> if the operator accept multiple values (like <code>IN</code> function)</li>
            </ul>
          </td>
      </tbody>
    </table>
  </div>
  
  <p>The default operators are available <a href="https://github.com/mistic100/jQuery-QueryBuilder/blob/master/src/query-builder.js#L129">in the source code</a>.</p>
  
  <h3 id="validation">Validation</h3>
  <p>QueryBuilder integrates a configurable validation system triggered when <code>getRules</code> and <code>getSQL</code> methods are called. The default validator checks for emptyness and can be extended with format check an bounds.<br>
  Optionally you can define a custom validation callback.<br>
  Here are the available attributes of the <code>validation</code> field of each filter:</p>
  
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 130px;">Name</th>
          <th style="width: 100px;">type</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>format</td>
          <td>string|object</td>
          <td>
            <ul>
              <li>For <code>date</code>, <code>time</code>, <code>datetime</code>: a valid <a href="http://momentjs.com/docs/#/parsing/string-format/">MomentJS string format</a></li>
              <li>For <code>string</code>: a regular expression (plain or RegExp object)</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>min</td>
          <td>integer|double|string</td>
          <td>
            <ul>
              <li>For <code>integer</code>, <code>double</code>: minimum value</li>
              <li>For <code>date</code>, <code>time</code>, <code>datetime</code>: minimum value, respecting <code>format</code></li>
              <li>For <code>string</code>: minimum length</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>max</td>
          <td>integer|double|string</td>
          <td>
            <ul>
              <li>For <code>integer</code>, <code>double</code>: maximum value</li>
              <li>For <code>date</code>, <code>time</code>, <code>datetime</code>: maximum value, respecting <code>format</code></li>
              <li>For <code>string</code>: maximum length</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>step</td>
          <td>integer|double</td>
          <td>
            <ul>
              <li>For <code>integer</code>, <code>double</code>: step value (for <code>double</code> you should always provide this value in order to pass the browser validation on <code>number</code> inputs)</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>callback</td>
          <td>function</td>
          <td>A function used to perform the validation. If provided, the default validation will not be performed. It must returns <code>true</code> if the value is valid or an error string otherwise. It takes 2 parameters:
            <ul>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
              <li><code>$rule</code>, the jQuery <code>&lt;li&gt;</code> element of the rule</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <h3 id="events">Events</h3>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
       <tr>
         <th style="width: 150px;">Event Type</th>
         <th>Description</th>
       </tr>
      </thead>
      <tbody>
       <tr>
         <td>validationError.queryBuilder</td>
         <td>Fired when a validation error occurred. The Event object contains the following attributes:
            <ul>
              <li><code>targetRule</code> DOM <code>&lt;li></code> element of the rule throwing the error</li>
              <li><code>error</code> a String containing an error code</li>
              <li><code>value</code></li>
              <li><code>filter</code></li>
              <li><code>operator</code></li>
              <li><code>builder</code> instance of QueryBuilder</li>
            </ul>
            The event is fired after the <code>onValidationError</code> callbacks.
         </td>
       </tr>
      </tbody>
    </table>
  </div>
  
  <h3 id="lang">Translation</h3>
  <p>Some default translation files are available in the <a href="https://github.com/mistic100/jQuery-QueryBuilder/tree/master/dist/i18n">i18n</a> folder. Just include one of the files after the main JavaScript to use it.<br>
  Alternatively you can overwrite some translations with the <code>lang</code> option. It is very useful for custom operators and conditions.<br>
  Default strings <a href="https://github.com/mistic100/jQuery-QueryBuilder/blob/master/src/query-builder.js#L97">in the source code</a>.</p>

  <h3 id="icons">Icons</h3>
  <p>The <code>icons</code> option provides a way of using alternate icons sets. Available attributes:</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 150px;">Name</th>
          <th style="width: 100px;">type</th>
          <th>default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>add_group</td>
          <td>string</td>
          <td>'glyphicon glyphicon-plus-sign'</td>
        </tr>
        <tr>
          <td>add_rule</td>
          <td>string</td>
          <td>'glyphicon glyphicon-plus'</td>
        </tr>
        <tr>
          <td>remove_group</td>
          <td>string</td>
          <td>'glyphicon glyphicon-remove'</td>
        </tr>
        <tr>
          <td>remove_rule</td>
          <td>string</td>
          <td>'glyphicon glyphicon-remove'</td>
        </tr>
        <tr>
          <td>sort</td>
          <td>string</td>
          <td>'glyphicon glyphicon-sort'</td>
        </tr>
      </tbody>
    </table>
  </div>

</section>

<section class="bs-docs-section">
  <h1 id="modules" class="page-header">
    Modules
  </h1>
  
  <h3 id="sql">SQL export</h3>
  <p>The SQL module allows to export rules as a SQL WHERE statement.</p>
  
  <h4>Methods</h4>
  
  <h5>getSQL</h5>
  <p>Performs validation and returns the rules as a valid SQL WHERE statement. See the <a href="basic-demo.html">basic demo</a> for output example. The first parameter can be:</p>
  <ul>
    <li><code>false</code> to output plain SQL</li>
    <li><code>'question_mark'</code> to output prepared statement with <code>?</code> placeholders</li>
    <li><code>'numbered'</code> to output prepared statement with numbered (<code>$1</code>, <code>$2</code>, ...) placeholders</li>
  </ul>
  <p>Set the second parameter to <code>false</code> to disable new lines in output.</p>
{% highlight javascript %}
$('#builder').queryBuilder('getSQL')
$('#builder').queryBuilder('getSQL', false, false)
{% endhighlight %}

  <h5>Operators</h5>
  <p>The SQL module requires special configuration of operators to convert rules to a valid SQL query.
    This configuration is stored in <code>sqlOperators</code> object, the keys are the operators types and the values are objects:</p>
    
  
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 150px;">Name</th>
          <th style="width: 100px;">type</th>
          <th style="width: 100px;">default</th>
          <th>description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>op</td>
          <td>string</td>
          <td><span class="label label-danger">required</span></td>
          <td>SQL operator used for this QueryBuilder operator, <code>?</code> is a placeholder which will be replaced by the value</td>
        </tr>
        <tr>
          <td>list</td>
          <td>boolean</td>
          <td>false</td>
          <td><code>true</code> if the operator accepts multiple values (eg: <code>IN</code> operator)</td>
        </tr>
        <tr>
          <td>sep</td>
          <td>string</td>
          <td>', '</td>
          <td>Separator between each value if <code>list</code> is true</td>
        </tr>
        <tr>
          <td>fn</td>
          <td>function</td>
          <td><i>passthru</i></td>
          <td>Function called on each value after escaping</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <p>The default operators configuration is available <a href="https://github.com/mistic100/jQuery-QueryBuilder/blob/master/src/query-builder-sql-support.js#L12">in the source code</a>.</p>
  
</section>

<link href="{{site.github.url}}/dist/jQuery-QueryBuilder/dist/query-builder.min.css" rel="stylesheet">
<script src="{{site.github.url}}/dist/jQuery-QueryBuilder/dist/query-builder.min.js"></script>
<script src="{{site.github.url}}/dist/demo-index.js"></script>
