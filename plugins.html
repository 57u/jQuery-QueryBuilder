---
layout: default
title: Plugins
---

<section class="bs-docs-section">
  <h1 id="presentation" class="page-header">
    Presentation
  </h1>

  <p>Plugins are used to extend the possibilities of QueryBuilder either by adding new public method or by modifying default behaviour.</p>
  <p>Some plugins like <b>Mongo support</b> and <b>SQL support</b> don't require any configuration and are useable as long as they are loaded. Other plugins must be manually activated with the <code>plugins</code> option. This option is an object where keys are plugin names and values are plugin configuration (or <code>null</code>).</p>

{% highlight javascript %}
$('#builder').queryBuilder({
  plugins: {
    'bt-tooltip-errors': { delay: 100 },
    'sortable': null
  }
});
{% endhighlight %}

  <p>You can find bellow the plugins shipped by default with QueryBuilder, with their identifiers.</p>
  <p><b>Want to create a new plugin ?</b> Check our <a href="{{site.github.url}}/dev/plugins.html">developper doc</a>.</p>
</section>


<section class="bs-docs-section">
  <h1 id="import-export" class="page-header">
    Import/Export plugins
  </h1>

  <p>These plugins do not need to be initialized with the <code>plugins</code> option. You can directly use the new methods.</p>


  <div class="bs-callout">
    <h2 id="sql-support">
    	SQL export <small>sql-support</small>
    </h2>

    <p>Allows to export rules as a SQL WHERE statement.</p>
    
    <h3>New methods</h3>
    
    <h4>getSQL</h4>
    <p>Performs validation and returns the rules as a valid SQL WHERE statement. See the <a href="{{site.github.url}}/demo.html">demo</a> for output example. The first parameter can be:</p>
    <ul>
      <li><code>false</code> to output plain SQL</li>
      <li><code>'question_mark'</code> to output prepared statement with <code>?</code> placeholders</li>
      <li><code>'numbered'</code> to output prepared statement with numbered (<code>$1</code>, <code>$2</code>, ...) placeholders</li>
      <li><code>'named'</code> to output prepared statement with named (<code>:id</code>, <code>:category</code>, ...) placeholders</li>
    </ul>

    <p>Set the second parameter to <code>true</code> to enable new lines in output.</p>
{% highlight javascript %}
var sql_stmt = $('#builder').queryBuilder('getSQL', 'question_mark');
var sql_raw = $('#builder').queryBuilder('getSQL', false, true);
{% endhighlight %}

    <h4>setRulesFromSQL</h4>
    <p>Clears the builder and set new rules from an SQL query. This method requires <a href="https://github.com/mistic100/sql-parser">SQLParser</a> to be loaded. The second parameter is used to inform the parser which kind of prepared statements are used (if any).</p>
{% highlight javascript %}
// no statements
$('#builder').queryBuilder('setRulesFromSQL', 'author LIKE "%Tolkien%" AND publish_date BETWEEN "1954/01/01" AND "1956/01/01"');

// statements with question marks
$('#builder').queryBuilder('setRulesFromSQL', {
  sql: 'author LIKE ? AND publish_date BETWEEN ? AND ?',
  params: ['%Tolkien%', '1954/01/01', '1956/01/01']
}, 'question_mark');

// named statements
$('#builder').queryBuilder('setRulesFromSQL', {
  sql: 'author LIKE :author AND publish_date BETWEEN :begin AND :end',
  params: {
    author: '%Tolkien%',
    begin: '1954/01/01',
    end: '1956/01/01'
  }
}, 'named');
{% endhighlight %}
    
    <h3>Requirements</h3>
{% highlight html %}
<!-- SQLParser -->
<script src="sql-parser/browser/sql-parser.js"></script>
{% endhighlight %}

    <h3>Operators</h3>
    <p>The SQL plugin requires special configuration for operators to convert rules to a valid SQL query. This configuration is stored in the <code>sqlOperators</code> option, see <a href="{{site.blobUrl}}/src/plugins/sql-support/plugin.js#L4-24">the source code</a> for more details.</p>

    <div class="bs-callout bs-callout-warning">
      <h4>About filters' id</h4>
      <p><code>setRulesFromSQL</code> assumes that you have only one filter by database field and that the <code>id</code> is the same as the <code>field</code>. If this is not the case, you can use the <code>getSQLFieldID</code> <a href="{{site.github.url}}/dev/events.html#changers">changer</a> to determine the filter's id, this event take two parameters: field name and value.</p>
    </div>
  </div>

  <div class="bs-callout">
    <h2 id="mongodb-support">
    	MongoDB import/export <small>mongodb-support</small>
    </h2>

    <p>Allows to export rules as a MongoDB find object as well as populating the builder from a MongoDB object.</p>
    
    <h3>New methods</h3>
    
    <h4>getMongo</h4>
    <p>Performs validation and returns the rules as a valid MongoDB find object. See the <a href="{{site.github.url}}/demo.html">demo</a> for output example.</p>
{% highlight javascript %}
var mongo = $('#builder').queryBuilder('getMongo');
{% endhighlight %}
    
    <h4>setRulesFromMongo</h4>
    <p>Clears the builder and set new rules from a MongoDB find object. The general rules syntax must be the same as what <code>getMongo</code> outputs.</p>
{% highlight javascript %}
$('#builder').queryBuilder('setRulesFromMongo', { /* ... */ });
{% endhighlight %}

    <h3>Operators</h3>
    <p>The MongoDB module requires special configuration of operators to convert rules to a valid Mongo JSON and vis-versa. This configuration is stored in the <code>mongoOperators</code> and <code>mongoRuleOperators</code> options, the keys are the operators types and the values are formatting functions, see <a href="{{site.blobUrl}}/src/plugins/mongodb-support/plugin.js#L4-68">the source code</a> for more details.</p>

    <div class="bs-callout bs-callout-warning">
      <h4>About filters' id</h4>
      <p><code>setRulesFromMongo</code> assumes that you have only one filter by database field and that the <code>id</code> is the same as the <code>field</code>. If this is not the case, you can use the <code>getMongoDBFieldID</code> <a href="{{site.github.url}}/dev/events.html#changers">changer</a> to determine the filter's id, this event take two parameters: field name and value.</p>
    </div>
  </div>

  <div class="bs-callout">
    <h2 id="loopback-support">
      Loopback export <small>loopback-support</small>
    </h2>

    <p>The Loopback plugin has been moved to <a href="https://github.com/fabien/jQuery-QueryBuilder-Loopback">a separated project</a>.</p>
  </div>
</section>


<section class="bs-docs-section">
  <h1 id="new-features" class="page-header">
    New features
  </h1>

  <div class="bs-callout">
    <h2 id="sortable">
      Sortable rules <small>sortable</small>
    </h2>

    <p>Enables drag &amp; drop sort of rules.</p>
    <p>The plugin also adds a new rule flag useable with <a href="{{site.github.url}}/index.html#methods">setRules</a> method: <code>no_sortable</code>, set it to <code>true</code> to remove the drag handle of a rule.</p>

    <h3>Options</h3>
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th style="width: 150px;">Name</th>
            <th style="width: 100px;">type</th>
            <th style="width: 190px;">default</th>
            <th>description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>icon</td>
            <td>string</td>
            <td>'glyphicon glyphicon-sort'</td>
            <td>The font-icon used as drag handle</td>
          </tr>
          <tr>
            <td>default_no_sortable</td>
            <td>boolean</td>
            <td>false</td>
            <td>Default value of <code>no_sortable</code> flag</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="bs-callout">
    <h2 id="filter-description">
      Filter description <small>filter-description</small>
    </h2>

    <p>Provides three ways to display a description about a filter: inline, <a href="http://getbootstrap.com/javascript/#popovers">Bootsrap Popover</a> or <a href="http://bootboxjs.com">Bootbox</a>.</p>
    <p>The description is defined in the <code>description</code> attribute of each filter. It can contain HTML.</p>
    
    <h3>Requirements</h3>
{% highlight html %}
<!-- Bootstrap CSS & JS -->
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<script src="bootstrap/js/bootstrap.min.js"></script>

<!-- Bootbox JS (requires Bootstrap CSS & JS) -->
<script src="bootbox/bootbox.js"></script>
{% endhighlight %}

    <h3>Options</h3>
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th style="width: 100px;">Name</th>
            <th style="width: 100px;">type</th>
            <th style="width: 220px;">default</th>
            <th>description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>icon</td>
            <td>string</td>
            <td>'glyphicon glyphicon-info-sign'</td>
            <td>The font-icon used for the button</td>
          </tr>
          <tr>
            <td>mode</td>
            <td>string</td>
            <td>'popover'</td>
            <td><code>inline</code>, <code>popover</code> or <code>bootbox</code></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="bs-callout">
    <h2 id="unique-filter">
      Unique filter <small>unique-filter</small>
    </h2>

    <p>Allows to define some filters as "unique": ie which can be used for only one rule, globally or in the same group.</p>
    <p>The plugin adds a new filter attribute named <code>unique</code>, set it to <code>true</code> to define the filter globally unique, or to <code>group</code> to define the filter unique inside its group.</p>
  </div>
</section>


<section class="bs-docs-section">
  <h1 id="display" class="page-header">
    Display
  </h1>

  <div class="bs-callout">
    <h2 id="bt-tooltips-errors">
      BT Tooltips for errors <small>bt-tooltips-errors</small>
    </h2>

    <p>Applies <a href="http://getbootstrap.com/javascript/#tooltips">Bootstrap Tooltips</a> on validation error messages.</p>
    
    <h3>Requirements</h3>
{% highlight html %}
<!-- Bootstrap CSS & JS -->
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<script src="bootstrap/js/bootstrap.min.js"></script>
{% endhighlight %}

    <h3>Options</h3>
    <p><i>All options supported by the tooltips plugin.</i></p>
  </div>

  <div class="bs-callout">
    <h2 id="bt-selectpicker">
      BT Selectpicker for filters/operators <small>bt-selectpicker</small>
    </h2>

    <p>Applies <a href="http://silviomoreto.github.io/bootstrap-select">Bootstrap Select</a> on filters and operators combo-boxes.</p>
    
    <h3>Requirements</h3>
{% highlight html %}
<!-- Bootstrap Select CSS & JS -->
<link rel="stylesheet" href="bootstrap-select/dist/css/bootstrap-select.min.css">
<script src="bootstrap-select/dist/js/bootstrap.min.js"></script>
{% endhighlight %}

    <h3>Options</h3>
    <p><i>All options supported by the selectpicker plugin.</i></p>
  </div>

  <div class="bs-callout">
    <h2 id="bt-checkbox">
      Awesome BT Checkbox <small>bt-checkbox</small>
    </h2>

    <p>Applies <a href="http://awesome-bootstrap-checkbox.okendoken.com/demo/index.html">Awesome Bootstrap Checkbox</a> to <code>checkbox</code> and <code>radio</code> inputs.</p>
    <p>The input color (all 6 Bootstrap colors) can be configured globally but also per-filter or even per-value with the <code>colors</code> filter attribute.</p>
{% highlight javascript %}
filters: [
  {
    id: 'category',
    type: 'int',
    input: 'checkbox',
    operators: ['in', 'not_in'],
    values: {
      1: 'Books',
      2: 'Movies',
      3: 'Music'
    },
    color: 'primary' // same color for each checkbox
  },
  {
    id: 'stock',
    type: 'boolean',
    input: 'radio',
    values: {
      0: 'No',
      1: 'Yes'
    },
    colors: { // different color for each radio
      0: 'danger',
      1: 'success'
    }
  }
]
{% endhighlight %}
    
    <h3>Requirements</h3>
{% highlight html %}
<!-- Awesome Bootstrap Checkbox CSS -->
<link rel="stylesheet" href="awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css">
{% endhighlight %}

    <h3>Options</h3>
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th style="width: 100px;">Name</th>
            <th style="width: 100px;">type</th>
            <th style="width: 220px;">default</th>
            <th>description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>color</td>
            <td>string</td>
            <td>'default'</td>
            <td>Default color, one of the six Bootstrap "colors"</td>
          </tr>
          <tr>
            <td>font</td>
            <td>string</td>
            <td>'glyphicons'</td>
            <td><code>glyphicons</code> or <code>fontawesome</code></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>